"use strict";angular.module("bricksApp.common",["bricksApp.apps"]),angular.module("bricksApp.common").directive("activelink",["$location",function(a){return{restrict:"A",link:function(b,c,d){var e=d.activelink,f=c.find("a")[0].hash.substring(1);b.$location=a,b.$watch("$location.path()",function(a){f.length>1&&a.substr(0,f.length)===f||a.split("/")[1]===f.substr(1,f.length)||1===f.length&&1===a.length?c.addClass(e):c.removeClass(e)})}}}]),angular.module("bricksApp.common").factory("beautify",function(){return{html:html_beautify}}),angular.module("bricksApp.common").directive("modal",function(){return{replace:!0,restrict:"E",scope:{closeable:"&",close:"&",open:"&",submit:"&",title:"="},templateUrl:"scripts/common/common/modal.html",transclude:!0,link:function(a){a.closeable=a.closeable(),void 0===a.closeable&&(a.closeable=!0)}}}),angular.module("bricksApp.common").directive("navbar",["$location","$parse",function(a,b){return{replace:!0,restrict:"E",templateUrl:"scripts/common/common/navbar.html",link:function(c,d,e){var f=b(e.hideOn)(c);Array.isArray(f)||(f=[f]),c.show=-1===f.indexOf(a.path()),c.$watch(function(){return a.path()},function(a,b){a!==b&&(c.show=-1===f.indexOf(a))})}}}]),angular.module("bricksApp.common").directive("validationClass",function(){return{require:"ngModel",restrict:"A",scope:{form:"@"},link:function(a,b,c){var d=b.controller("form"),e=b.parent().parent();a.$watch(c.ngModel,function(){var a=b[0].name;d[a].$dirty&&(d[a].$invalid?e.removeClass("has-success").addClass("has-error"):e.removeClass("has-error").addClass("has-success"))})}}}),angular.module("bricksApp.about",["ngRoute"]).config(["$routeProvider",function(a){a.when("/about",{templateUrl:"scripts/about/about.html"})}]),angular.module("bricksApp.apps",[]).service("apps",["$window",function(a){var b="bricks_apps",c="bricks_current",d=a.localStorage.getItem(b),e=a.localStorage.getItem(c);return d=d?angular.fromJson(d):[],{all:function(){return angular.copy(d)},current:function(b){if(!b){var f;return e=a.localStorage.getItem(c),d.forEach(function(a){a.id===e&&(f=a)}),f?f:d[0]}e=b.id,a.localStorage.setItem(c,e)},add:function(c){c.id=c.id||uuid(),c.css=c.css||"",c.js=c.js||"",c.pages=c.pages||[{url:"/",template:""}],c.storage=c.storage||"local",c.tables=c.tables||[],d.push(angular.copy(c)),a.localStorage.setItem(b,angular.toJson(d))},update:function(c){d.forEach(function(e,f){e.id===c.id&&(d[f]=angular.copy(c),a.localStorage.setItem(b,angular.toJson(d)))})},remove:function(c){d.forEach(function(e,f){e.id===c&&(d.splice(f,1),a.localStorage.setItem(b,angular.toJson(d)))})}}}]).directive("apps",["$document","$http","apps",function(a,b,c){var d=function(a){var b={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},c=/\\|'|\r|\n|\t|\u2028|\u2029/g;return a.replace(c,function(a){return"\\"+b[a]})};return{replace:!0,restrict:"E",templateUrl:"scripts/apps/apps.html",link:function(e){e.showAppsMenu=!1,e.showAppsModal=!1,e.app={},e.$watch(function(){return c.all()},function(){e.apps=c.all(),e.currentApp=c.current()},!0),e.addApp=function(){var b=angular.element(a[0].newAppForm);b.controller("form").$valid&&(e.apps.push(e.app),c.add(e.app),c.current(e.app),e.currentApp=e.app,e.app={},e.showAppsModal=!1)},e.selectApp=function(a){c.current(a),e.currentApp=a,e.showAppsMenu=!1},e.toggleAppsMenu=function(){e.showAppsMenu=!e.showAppsMenu},e.toggleAppsModal=function(){e.showAppsModal=!e.showAppsModal,e.showAppsMenu=!1},e.hideAppsModal=function(){e.showAppsModal=!1},e.download=function(){var a=new JSZip,c=a.folder(e.currentApp.name);b.get("build.html",{cache:!0}).then(function(a){var f="<script>window.bricksApp = JSON.parse('"+d(angular.toJson(e.currentApp))+"');</script>",g=a.data.replace("</head>",f+"\n</head>");return c.file("index.html",g),b.get("bower_components/node-uuid/uuid.js",{cache:!0})}).then(function(a){return e.scripts=a.data,b.get("scripts/storage/storage.js",{cache:!0})}).then(function(a){return e.scripts+=a.data,b.get("scripts/preview.js",{cache:!0})}).then(function(b){c.folder("scripts").file("build.js",e.scripts+b.data),saveAs(a.generate({type:"blob"}),e.currentApp.name+".zip")})}}}}]),angular.module("bricksApp.database",["ngRoute","bricksApp.common"]).config(["$routeProvider",function(a){a.when("/database",{templateUrl:"scripts/database/database.html",controller:"DatabaseCtrl"})}]).controller("DatabaseCtrl",["$scope","$window","apps","storage",function(a,b,c,d){var e,f=[{field:"actions",displayName:"",enableCellEdit:!1,pinnable:!1,width:24,cellTemplate:'<div class="ngCellText" ng-class="col.colIndex()"><a href="" ng-click="deleteRow(row.entity)"><span class="fa fa-trash-o text-danger"></span></a></div>'}];a.showMenu={actions:!1},a.defaultColumns=[{name:"id"},{name:"created_at"},{name:"updated_at"}],a.app=c.current(),a.selectTable=function(b){a.currentTable=a.app.tables[b],a.currentIndex=b,a.currentTable&&(a.data=e.all(a.currentTable.name))},d.init(a.app).then(function(b){e=b,a.app.tables&&a.selectTable(0)}),a.gridOptions={columnDefs:"columns",data:"data",enableCellEditOnFocus:!0,enableCellSelection:!0,enablePaging:!0,enablePinning:!0,enableRowSelection:!1,showFooter:!0},a.showModal={newTable:!1,newColumn:!1},a.newTable={},a.newColumn={},a.newRow={},a.columnToDelete={},a.$watch(function(){return a.currentTable&&a.currentTable.name?e.all(a.currentTable.name):void 0},function(b){a.data=b}),a.$watch(function(){return c.current().id},function(b){a.app.id!==b&&(a.app=c.current(),d.init(a.app).then(function(b){e=b,a.app.tables?a.selectTable(0):a.app.tables=[]}))}),a.$watch("currentTable.columns",function(b){b&&(a.columns=b.reduce(function(a,b){return a.push({field:b.name}),a},angular.copy(f)))},!0),a.hasTables=function(){return a.app.tables&&a.app.tables.length>0},a.isDefaultColumn=function(b){var c=!1;return a.defaultColumns.forEach(function(a){a.name===b.name&&(c=!0)}),c},a.addTable=function(){var b=angular.element(document.newTableForm);if(b.controller("form").$valid){a.newTable.columns=angular.copy(a.defaultColumns);var d=a.app.tables.push(angular.copy(a.newTable))-1;c.update(a.app),a.selectTable(d),a.newTable={},a.showModal.newTable=!1}},a.deleteTable=function(){var d=b.confirm('Are you sure you want to delete the table "'+a.currentTable.name+'"?');d&&(a.app.tables.splice(a.currentIndex,1),c.update(a.app),a.selectTable(0)),a.showMenu.actions=!1},a.addColumn=function(){var b=angular.element(document.newColumnForm);b.controller("form").$valid&&(a.currentTable.columns.push(angular.copy(a.newColumn)),c.update(a.app),a.newColumn={},a.showModal.newColumn=!1)},a.deleteColumn=function(){var d=a.currentTable.columns[a.columnToDelete],e=b.confirm('Are you sure you want to delete the column "'+d.name+'"?');e&&(a.currentTable.columns.splice(a.columnToDelete,1),c.update(a.app),a.showModal.deleteColumn=!1)},a.addRow=function(){e.add(a.currentTable.name,a.newRow),a.newRow={},a.showModal.newRow=!1},a.deleteRow=function(b){e.remove(a.currentTable.name,b)},a.emptyTable=function(){var c='Are you sure you want to delete all the rows in the table "'+a.currentTable.name+'"?';b.confirm(c)&&e.clear(a.currentTable.name),a.showMenu.actions=!1}}]),angular.module("bricksApp.settings",["ngRoute","bricksApp.common"]).config(["$routeProvider",function(a){a.when("/settings",{templateUrl:"scripts/settings/settings.html",controller:"SettingsCtrl"})}]).controller("SettingsCtrl",["$location","$scope","$window","apps",function(a,b,c,d){b.alerts=[],b.app=angular.copy(d.current()),b.storages=[{name:"local",label:"User's Device"},{name:"firebase",label:"Firebase"}],b.$watch(function(){return d.current()},function(a){b.app=angular.copy(a)},!0),b.saveSettings=function(){b.settingsForm.$valid&&(d.update(b.app),b.alerts.push({type:"success",message:"Settings saved."}))},b.deleteApp=function(b){var e=c.confirm('Are you sure you want to delete the app "'+b.name+"\"? There's no going back.");e&&(d.remove(b.id),a.path("/"))}}]),angular.module("bricksApp.start",["ngRoute","bricksApp.common"]).config(["$routeProvider",function(a){a.when("/start",{templateUrl:"scripts/start/start.html",controller:"StartCtrl"})}]).run(["apps","$location","$rootScope",function(a,b,c){c.$on("$locationChangeStart",function(c,d){0===a.all().length&&-1===d.indexOf("/start")&&b.path("/start")})}]).controller("StartCtrl",["$location","$scope","apps",function(a,b,c){c.all().length>0&&a.path("/").replace(),b.app={},b.addApp=function(){b.newAppForm.$valid&&(c.add(b.app),c.current(b.app),a.path("/").replace())}}]),angular.module("bricksApp.storage",["firebase"]).factory("localData",["$q","$window",function(a,b){var c,d={},e=function(a){var d=b.localStorage.getItem(c+a);return d?angular.fromJson(d):[]},f=function(a){var e=d[a]?angular.toJson(d[a]):"";b.localStorage.setItem(c+a,e)};return function(b,g){var h=a.defer();return d=g.data,c="bricks_app_"+b.id+"_",b.tables.forEach(function(a){g.data[a.name]=e(a.name),g.$watch("data."+a.name,function(){f(a.name)},!0)}),h.resolve(),h.promise}}]).factory("firebaseData",["$rootScope","angularFire",function(a,b){return function(a,c){return b(new Firebase("https://"+a.settings.firebase+".firebaseio.com"),c,"data")}}]).service("storage",["$q","$rootScope","firebaseData","localData",function(a,b,c,d){var e=b.$new();return e.init=function(a){var b;return e.data={},b="firebase"===a.storage?c(a,e):d(a,e),b.then(function(){return e})},e.all=function(a){return a?e.data[a]:e.data},e.get=function(a,b){var c;return e.data[a]&&e.data[a].some(function(a){return a.id===b?(c=a,!0):void 0}),c},e.add=function(a,b){var c=(new Date).toISOString().split(".")[0].replace("T"," ");b.id=uuid(),b.created_at=c,b.updated_at=c,e.data[a]=e.data[a]||[],e.data[a].push(b)},e.update=function(a,b){e.data[a]&&e.data[a].some(function(c,d){return c.id===b.id?(e.data[a][d]=b,!0):void 0})},e.remove=function(a,b){e.data[a]&&e.data[a].some(function(c,d){return c.id===b.id?(e.data[a].splice(d,1),!0):void 0})},e.clear=function(a){e.data[a].length=0},e}]),angular.module("bricksApp.ui",["ngRoute","bricksApp.common"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"scripts/ui/ui.html"})}]).directive("ui",["apps","beautify","components",function(a,b,c){return{controller:["$scope","$element",function(c,d){var e,f,g=d.find("iframe"),h=a.current().pages[0],i=function(){f||(f=g.contents().find("div[ng-view]")),h.template=b.html(f.html())},j=function(a){a.is("html, body, [ng-view]")||(e=a,c.$broadcast("selection"))},k=function(a){return a?(e=a,c.$broadcast("selection"),void 0):e},l=function(a){return a?(a.template=b.html(a.template),h=a,void 0):h};return{iframe:g,updateTemplate:i,selectElement:j,selection:k,page:l}}],link:function(a){a.components=c.all()}}}]).service("components",["$http","$templateCache",function(a,b){var c=[];return a.get("components/components.html",{cache:b}).success(function(a){jQuery("<div>"+a+"</div>").find("component").each(function(a,b){var d={};[].forEach.call(b.children,function(a){d[a.nodeName.toLowerCase()]=a.innerHTML.trim()}),c.push(d)})}),{all:function(){return c}}}]),angular.module("bricksApp.ui").directive("bindings",["$timeout","apps",function(a,b){return{replace:!0,require:"^ui",restrict:"E",scope:{},templateUrl:"scripts/ui/ui/components/bindings.html",link:function(c,d,e,f){c.selection=null,c.tables=b.current().tables,c.bindings={};var g=function(a){var b=[];return angular.isString(a)&&(a=a.trim(),"{"===a.charAt(0)&&"}"===a.slice("-1")&&a.slice(1,-1).split(",").forEach(function(a){a=a.split(":"),b.push({name:a[0].trim().slice(1,-1),value:a[1].trim()})})),b},h=function(a){var b=[];return a.forEach(function(a){a=a.split(":"),"filter"===a.shift().trim()&&a.length>0&&(a=g(a.join(":")),b=b.concat(a))}),b},i=function(a){if(!a)return{};var b,d;return a=a.split("|"),b=a?a.shift().trim().split(" "):[],3!==b.length?{}:(c.tables.some(function(a){return a.name===b[0]?(d=a.name,!0):void 0}),{table:d,filters:h(a)})},j=function(a,b){var c=[];b.classes.forEach(function(a){a.name&&a.value&&c.push("'"+a.name+"': "+a.value)}),c.length>0?a.attr("ng-class","{"+c.join(", ")+"}"):a.removeAttr("ng-class")},k=function(a){var b=[];return a.filters.length>0&&(a.filters.forEach(function(a){var c,d;(a.name||a.value)&&(c=a.name?a.name:"$",d=a.value?a.value:"true",b.push("'"+c+"': "+d))}),b.length>0)?"filter:{"+b.join(", ")+"}":""},l=function(a,b){if(!b.repeat)return a.removeAttr("ng-repeat"),void 0;var c=b.repeat+" in data['"+b.repeat+"']",d=k(b);d&&(c+=" | "+d),a.attr("ng-repeat",c)};c.$watch("bindings",function(a){c.selection&&c.tables&&(a.bind?c.selection.attr("ng-bind",a.bind):c.selection.removeAttr("ng-bind"),a.model?c.selection.attr("ng-model",a.model):c.selection.removeAttr("ng-model"),j(c.selection,a),l(c.selection,a),f.updateTemplate())},!0),c.$on("selection",function(){c.selection=f.selection(),c.nodeName=c.selection.prop("nodeName"),c.isInput=["INPUT","TEXTAREA","SELECT"].indexOf(c.nodeName)>-1;var b=i(c.selection.attr("ng-repeat"));c.bindings={bind:c.selection.attr("ng-bind"),model:c.selection.attr("ng-model"),repeat:b.table,filters:b.filters||[],classes:g(c.selection.attr("ng-class"))},a(function(){c.$apply()})})}}}]),angular.module("bricksApp.ui").directive("componentStyle",["$compile","$timeout","components",function($compile,$timeout,components){return{replace:!0,require:"^ui",restrict:"E",scope:{},templateUrl:"scripts/ui/ui/components/component-style.html",link:function(scope,element,attrs,uiCtrl){var form=element.find("form"),allComponents=components.all();scope.component={},scope.options={},scope.update=function(){},scope.select=uiCtrl.selection,scope.change=function(){scope.update(),uiCtrl.updateTemplate()},scope.$on("selection",function(){scope.options={},scope.component={},form.empty(),allComponents.some(function(a){var b;return scope.selection=uiCtrl.selection(),b=scope.selection.is(a.selector),b&&(scope.component=a),b}),scope.component["admin-script"]&&eval(scope.component["admin-script"]),scope.component.admin&&form.append($compile(scope.component.admin)(scope)),$timeout(function(){scope.$apply()})})}}}]),angular.module("bricksApp.ui").directive("draggable",function(){return function(a,b,c){b.on("dragstart",function(b){var d=a.$eval(c.html);b.originalEvent.dataTransfer.effectAllowed="move",b.originalEvent.dataTransfer.setData("text/plain",d)})}}),angular.module("bricksApp.ui").directive("droppable",function(){return{require:"^ui",link:function(a,b,c,d){var e,f,g,h,i=b,j=function(a){var b=angular.element(a.target);b.is("html, body, div[ng-view]")||(e=a.target.draggable,a.target.draggable=!0,b.on("dragstart",function(a){a.originalEvent.dataTransfer.effectAllowed="move",f=angular.element(a.target)}))},k=function(a){e||a.target.removeAttribute("draggable")},l=function(a,b){b=angular.element(b),b.is("html, body")&&(b=h),b.is("div[ng-view], :empty:not(input, textarea)")?b.append(a):b.after(a)},m=function(a,b){var c;b=angular.element(b),angular.isElement(a)?c=a.parent():a=angular.element(a),l(a,b),c&&c.html(c.html().trim())},n=function(a){a.preventDefault(),a.originalEvent.dataTransfer.dropEffect="move",g=angular.element(a.target),g.addClass("bricks-dragover")},o=function(){g.removeClass("bricks-dragover")},p=function(b){var c;return b.stopPropagation(),f?(f[0].removeAttribute("draggable"),c=f,f=null):c=b.originalEvent.dataTransfer.getData("text/plain"),g.removeClass("bricks-dragover"),m(c,b.target),d.updateTemplate(),a.$apply(),!1};i.on("load",function(){var a=i.contents();h=a.find("div[ng-view]"),a.on({dragover:n,dragleave:o,drop:p,mousedown:j,mouseup:k})})}}}),angular.module("bricksApp.ui").directive("editFrame",["beautify",function(a){return{require:"^ui",link:function(b,c,d,e){var f,g=c,h=function(a){a.preventDefault(),e.selectElement(angular.element(a.target))};b.$watch(function(){return e.page().template},function(b){f&&b!==a.html(f.html())&&f.html(b)}),g.on("load",function(){var a=g.contents();f=a.find("div[ng-view]"),f.html(e.page().template),a.on("click",h)})}}}]),angular.module("bricksApp.ui").directive("events",["$timeout","apps",function(a,b){return{replace:!0,require:"^ui",restrict:"E",scope:{},templateUrl:"scripts/ui/ui/components/events.html",link:function(c,d,e,f){c.selection=null,c.app=b.current(),c.event={},c.names="blur change click copy cut dblclick focus keydown keyup keypress mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup paste submit".split(" "),c.actions={add:"add row",update:"update row",remove:"remove row",visit:"load page",custom:"custom"};var g=function(a,b){var d=a.attr("ng-"+b);if(d)if(c.event.type=b,c.event.action=d.split("(")[0],c.event.action&&Object.keys(c.actions).indexOf(c.event.action)>-1){var e=d.split("'")[1];c.event.object="visit"===c.event.action?e.replace(/{{(\w+)\.id}}/,":$1"):e}else c.event.action="custom",c.event.object=d};c.$on("selection",function(){c.selection=f.selection(),c.event={},c.names.forEach(function(a){g(c.selection,a)}),a(function(){c.$apply()})}),c.$watch("event",function(a){var b;if(c.selection){if(a.type&&a.action&&a.object){switch(a.action){case"custom":b=a.object;break;case"visit":var d=a.object.replace(/:(\w+)/,"{{$1.id}}");b=a.action+"('"+d+"')";break;default:b=a.action+"('"+a.object+"', "+a.object+")"}c.selection.attr("ng-"+a.type,b)}else c.selection.removeAttr("ng-"+a.type);f.updateTemplate()}},!0)}}}]),angular.module("bricksApp.ui").factory("Overlay",function(){var a=function(a,b){var c=this.iframe=angular.element("iframe[edit-frame]");this.element=a,c.on("load",function(){c.contents().on(b)})};return a.prototype.moveTo=function(a){if(0!==a.closest("div[ng-view]").length){var b=this.iframe[0].contentWindow,c=this.iframe[0].offsetTop-b.pageYOffset,d=this.iframe[0].offsetLeft-b.pageXOffset,e=a.offset();return this.element.css({display:"block",width:a.outerWidth()+"px",height:a.outerHeight()+"px",top:c+e.top+"px",left:d+e.left+"px"})}},a}).directive("overlayHighlight",["Overlay",function(a){return{replace:!0,require:"^ui",restrict:"E",template:'<div class="overlay-highlight"></div>',link:function(b,c){var d=new a(c,{"click mouseout":function(){c.hide()},mouseover:function(a){d.moveTo(angular.element(a.target))}})}}}]).directive("overlaySelect",["Overlay",function(a){return{replace:!0,require:"^ui",restrict:"E",template:'<div class="overlay-select"><div class="actions"><span>{{selector}}</span><a href="" title="Select parent" ng-click="parent($event)"><span class="fa fa-level-up"></span></a><a href="" title="Duplicate" ng-click="copy($event)"><span class="fa fa-copy"></span></a><a href="" title="Delete" ng-click="delete($event)"><span class="fa fa-trash-o"></span></a></div></div>',link:function(b,c,d,e){var f=new a(c,{click:function(a){if(c.is(":visible")&&b.selected[0]===a.target)c.hide(),b.selected=null;else{var d=angular.element(a.target);f.moveTo(d)&&(b.selected=d)}}}),g=function(a){var c=a.attr("id");if(c)b.selector="#"+c;else{var d=a.attr("class"),e=a.prop("tagName").toLowerCase();b.selector=d?e+"."+d.split(/\s+/).join("."):e}};b.parent=function(a){a.preventDefault();var c=b.selected.parent();c.is("div[ng-view]")||(b.selected=c)},b.copy=function(a){a.preventDefault(),b.selected=b.selected.clone().insertAfter(b.selected),e.updateTemplate()},b.delete=function(a){var d=b.selected.parent();if(a.preventDefault(),b.selected.remove(),d){var f=d.html();f=f?d.html().trim():"",d.html(f)}e.updateTemplate(),c.hide()},b.$watch("selected",function(a){a&&(f.moveTo(a),g(a),e.selectElement(b.selected))}),b.$watch(function(){return e.page()},function(){c.hide()})}}}]),angular.module("bricksApp.ui").directive("inspector",["apps",function(a){return{replace:!0,require:"^ui",restrict:"E",templateUrl:"scripts/ui/ui/pages/inspector.html",link:function(b,c,d,e){var f,g=angular.element("iframe[edit-frame]"),h={lineWrapping:!0,lineNumbers:!0,theme:"base16-dark"};b.page=e.page,b.view="html",b.app=a.current(),b.htmlOptions=angular.extend({mode:{name:"xml",htmlMode:!0}},h),b.cssOptions=angular.extend({mode:"css"},h),b.jsOptions=angular.extend({mode:"javascript"},h),g.on("load",function(){f||(f=g.contents().find("#bricksAppStyle")),f.html(b.app.css)}),b.$watch("app.css",function(a){f&&f.html(a)})}}}]),angular.module("bricksApp.ui").directive("pages",["$timeout","$window","apps",function(a,b,c){return{replace:!0,require:"^ui",restrict:"E",templateUrl:"scripts/ui/ui/pages/pages.html",link:function(d,e,f,g){var h=!1;d.newPage={template:""},d.showModal=!1,d.savePageText="Save",d.current={},d.setCurrent=function(a){d.current=a,g.page(a),d.showMenu=!1},d.$watch(function(){return c.current().id},function(){d.app=c.current(),d.setCurrent(d.app.pages[0])}),d.$watch(function(){return g.page().template},function(a,b){a!==b&&(h=!0)}),b.addEventListener("beforeunload",function(a){if(h){var c="You have unsaved changes on this page. If you leave without saving your changes will be lost.";return(a||b.event).returnValue=c,c}}),d.addPage=function(){var a=angular.copy(d.newPage);d.app.pages.push(a),c.update(d.app),d.setCurrent(a),d.newPage={template:""},d.showModal=!1},d.savePage=function(){c.update(d.app),h=!1,d.savePageText="Saving...",a(function(){d.savePageText="Save"},1e3)},d.deletePage=function(){b.confirm("Are you sure you want to delete this page?")&&(d.app.pages.some(function(a,b){return d.current.url===a.url?(d.app.pages.splice(b,1),!0):void 0}),c.update(d.app),d.setCurrent(d.app.pages[0]))}}}}]),angular.module("bricksApp.ui").directive("preview",["$http","$location","$window","apps",function(a,b,c,d){return{replace:!0,require:"^ui",restrict:"E",template:'<button class="preview" ng-click="preview()">Preview</button>',link:function(a){var e=null;a.preview=function(){e&&!e.closed&&e.close(),e=c.open("preview.html"),angular.element(e).on("load",function(){e.postMessage(d.current(),b.absUrl())})},a.$on("$destroy",function(){e&&e.close()})}}}]),angular.module("bricksApp.ui").directive("devices",function(){return{restrict:"E",templateUrl:"scripts/ui/ui/screen/devices.html",link:function(a){var b=angular.element("#canvas").find("iframe");a.devices=["mobile","tablet","laptop","desktop","expand"],a.currentDevice="expand",a.$watch("currentDevice",function(a,c){b.removeClass("device-"+c).addClass("device-"+a)})}}}),angular.module("bricksApp.ui").directive("inspectorToggle",function(){return{replace:!0,restrict:"E",template:'<button class="btn btn-link" ng-click="toggleInspector()"><span class="fa fa-code"></span></button>',link:function(a){var b=angular.element("body"),c=!1;a.toggleInspector=function(){c=!c,c?b.addClass("inspector-visible"):b.removeClass("inspector-visible")}}}}),angular.module("bricksApp.ui").directive("sidebarToggle",["$animate",function(a){return{replace:!0,restrict:"E",scope:{},template:'<button class="collapse-button" ng-click="toggleSidebar()"></button>',link:function(b,c,d){var e=angular.element("body"),f="collapsed-"+d.position,g="collapse-button-parent "+d.position,h=c.parent().addClass(g),i=!1;b.toggleSidebar=function(){i?a.removeClass(h,"closed",function(){e.removeClass(f)}):a.addClass(h,"closed",function(){e.addClass(f)}),i=!i}}}}]),angular.module("bricksApp",["ngAnimate","ngRoute","ngGrid","ui.codemirror","bricksApp.common","bricksApp.about","bricksApp.apps","bricksApp.database","bricksApp.settings","bricksApp.start","bricksApp.storage","bricksApp.ui"]).config(["$routeProvider",function(a){a.otherwise({redirectTo:"/"})}]),angular.module("bricksApp").run(["$templateCache",function(a){a.put("components/components.html",'<component>\n  <name>Address</name>\n  <template>\n    <address>\n      <strong>Full Name</strong><br>\n      <span>000 Fake Ave</span>, <span>Suite 000</span><br>\n      <span>San Francisco</spam>, <span>CA</span> <span>00000</span><br>\n      <span>USA</span>\n      <abbr title="Phone">P:</abbr> <span>(123) 456-7890</span><br>\n      <a href="mailto:#">first.last@example.com</a>\n    </address>\n  </template>\n  <selector>address</selector>\n</component>\n\n<component>\n  <name>Alert</name>\n  <template>\n    <div class="alert alert-success">\n      <strong>Well done!</strong> You successfully read this important alert message.\n    </div>\n  </template>\n  <selector>div.alert</selector>\n</component>\n\n<component>\n  <name>Badge</name>\n  <template>\n    <span class="badge">42</span>\n  </template>\n  <selector>span.badge</selector>\n</component>\n\n<component>\n  <name>Blockquote</name>\n  <template>\n    <blockquote>\n      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.\n      Integer posuere erat a ante.</p>\n      <small>Someone famous in <cite title="Source Title">Source Title</cite>\n      </small>\n    </blockquote>\n  </template>\n  <selector>blockquote</selector>\n</component>\n\n<component>\n  <name>Breadcrumbs</name>\n  <template>\n    <ol class="breadcrumb">\n      <li><a href="#">Home</a></li>\n      <li><a href="#">Library</a></li>\n      <li class="active">Data</li>\n    </ol>\n  </template>\n  <selector>ol.breadcrumb</selector>\n</component>\n\n<component>\n  <name>Button Group</name>\n  <template>\n    <div class="btn-group">\n      <button type="button" class="btn btn-default">Left</button>\n      <button type="button" class="btn btn-default">Middle</button>\n      <button type="button" class="btn btn-default">Right</button>\n    </div>\n  </template>\n  <selector>div.btn-group</selector>\n</component>\n\n<component>\n  <name>Button</name>\n  <template>\n    <button type="button" class="btn btn-default">Button</button>\n  </template>\n  <selector>.btn</selector>\n</component>\n\n<component>\n  <name>Checkbox</name>\n  <template>\n    <div class="form-group">\n      <div class="checkbox">\n        <label>\n          <input type="checkbox" value="">\n          <span>Checkbox</span>\n        </label>\n      </div>\n    </div>\n  </template>\n  <selector>input[type="checkbox"]</selector>\n</component>\n\n<component>\n  <name>Close Icon</name>\n  <template>\n    <button type="button" class="close" aria-hidden="true">&times;</button>\n  </template>\n  <selector>button.close</selector>\n</component>\n\n<component>\n  <name>Container</name>\n  <template>\n    <div class="container"></div>\n  </template>\n  <selector>div.container</selector>\n</component>\n\n<component>\n  <name>Description</name>\n  <template>\n    <dl>\n      <dt>Defined Term 1</dt>\n      <dd>This is the definition of Term 1.</dd>\n      <dt>Defined Term 2</dt>\n      <dd>This is the definition of Term 2.</dd>\n    </dl>\n  </template>\n  <selector>dl</selector>\n  <admin>\n    <div class="form-group">\n      <label for="optionsDefinitionStyle">Style</label>\n      <select id="optionsDefinitionStyle" ng-model="options.style"\n        ng-options="k for k in [\'normal\', \'horizontal\']"\n        ng-change="change()">\n      </select>\n    </div>\n  </admin>\n  <admin-script>\n    if (scope.selection.hasClass(\'dl-horizontal\')) {\n      scope.options.style = \'horizontal\';\n    } else {\n      scope.options.style = \'normal\';\n    }\n\n    scope.update = function () {\n      if (scope.options.style === \'horizontal\') {\n        scope.selection.addClass(\'dl-horizontal\');\n      } else {\n        scope.selection.removeClass(\'dl-horizontal\');\n      }\n    };\n  </admin-script>\n</component>\n\n<component>\n  <name>Dropdown</name>\n  <template>\n    <div class="dropdown">\n      <button class="btn dropdown-toggle sr-only" type="button" id="dropdownMenu1" data-toggle="dropdown">\n        Dropdown\n        <span class="caret"></span>\n      </button>\n      <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">\n        <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Action</a></li>\n        <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Another action</a></li>\n        <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Something else here</a></li>\n        <li role="presentation" class="divider"></li>\n        <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Separated link</a></li>\n      </ul>\n    </div>\n  </template>\n  <selector>div.dropdown</selector>\n</component>\n\n<component>\n  <name>Form</name>\n  <template>\n    <form role="form"></form>\n  </template>\n  <selector>form</selector>\n</component>\n\n<component>\n  <name>Grid Column</name>\n  <template>\n    <div class="col-sm-6"></div>\n  </template>\n  <selector>\n    div[class*=\'col-xs-\'], div[class*=\'col-sm-\'],\n    div[class*=\'col-md-\'], div[class*=\'col-lg-\']\n  </selector>\n  <admin>\n    <div class="form-group">\n      <label for="optionsGridColumnWidth">Column width</label>\n      <select id="optionsGridColumnWidth" ng-model="options.width"\n        ng-options="k for k in options.widths" ng-change="change()">\n      </select>\n    </div>\n    <div class="form-group">\n      <label for="optionsGridColumnDevices">Collapse on</label>\n      <select id="optionsGridColumnDevices" ng-model="options.devices"\n        ng-change="change()">\n        <option value="lg">all small and medium screens</option>\n        <option value="md">tablets and phones</option>\n        <option value="sm">phones only</option>\n        <option value="xs">neither</option>\n      </select>\n    </div>\n  </admin>\n  <admin-script>\n    var classes = [];\n    var currentDeviceWidthClass = \'\';\n\n    scope.options.widths = Array.apply(0, Array(12)).map(function (x, i) {\n      return i + 1 + \'\';\n    });\n\n    // Gets all the column classes of the element.\n    scope.selection.attr(\'class\').split(\' \').forEach(function (c) {\n      if (c.indexOf(\'col-\') === 0) {\n        c = c.split(\'-\');\n        classes.push({\n          devices: c[1],\n          width: c[2]\n        });\n      }\n    });\n\n    // Gets the width and column type of the current element.\n    [\'xs\', \'sm\', \'md\', \'lg\'].some(function (t) {\n      classes.some(function (c) {\n        if (c.devices === t) {\n          scope.options.devices = c.devices;\n          scope.options.width = c.width;\n          currentDeviceWidthClass = \'col-\' + c.devices + \'-\' + c.width;\n          return true;\n        }\n      });\n    });\n\n    // Updates the selection classes.\n    scope.update = function () {\n      var newDeviceWidthClass = \'col-\' + scope.options.devices + \'-\' +\n                                scope.options.width;\n\n      scope.selection.removeClass(currentDeviceWidthClass)\n        .addClass(newDeviceWidthClass);\n\n      currentDeviceWidthClass = newDeviceWidthClass;\n    };\n  </admin-script>\n</component>\n\n<component>\n  <name>Grid Row</name>\n  <template>\n    <div class="row"></div>\n  </template>\n  <selector>div.row</selector>\n</component>\n\n<component>\n  <name>Heading</name>\n  <template>\n    <h1>This is a heading.</h1>\n  </template>\n  <selector>h1, h2, h3, h4, h5, h6</selector>\n  <admin>\n    <div class="form-group">\n      <label for="optionsHeadingType">Type</label>\n      <select id="optionsHeadingType" ng-model="options.type"\n        ng-options="k.value as k.label for k in options.types"\n        ng-change="change()">\n      </select>\n    </div>\n  </admin>\n  <admin-script>\n    scope.options.types = Array.apply(0, Array(6)).map(function (x, i) {\n      var j = i + 1;\n      return {value: \'H\' + j, label: \'heading \' + j};\n    });\n    scope.options.type = scope.selection.prop(\'nodeName\');\n\n    scope.update = function () {\n      var newElement = document.createElement(scope.options.type);\n      newElement = angular.element(newElement);\n      newElement.append(scope.selection.contents());\n      scope.selection.replaceWith(newElement);\n      scope.select(newElement);\n    };\n  </admin-script>\n</component>\n\n<component>\n  <name>Image</name>\n  <template>\n    <img src="http://placehold.it/100x100" alt="">\n  </template>\n  <selector>img</selector>\n  <admin>\n    <div class="form-group">\n      <label for="optionsImageSrc">URL</label>\n      <input type="text" id="optionsImageSrc" ng-model="options.src"\n        ng-change="change()">\n    </div>\n    <div class="form-group">\n      <label for="optionsImageResponsive">Responsive</label>\n      <select id="optionsImageResponsive" ng-model="options.responsive"\n        ng-options="k for k in [\'yes\', \'no\']" ng-change="change()">\n      </select>\n    </div>\n  </admin>\n  <admin-script>\n    scope.options.src = scope.selection.attr(\'src\');\n\n    if (scope.selection.hasClass(\'img-responsive\')) {\n      scope.options.responsive = \'yes\';\n    } else {\n      scope.options.responsive = \'no\';\n    }\n\n    scope.update = function () {\n      scope.selection.attr(\'src\', scope.options.src);\n\n      if (scope.options.responsive === \'yes\') {\n        scope.selection.addClass(\'img-responsive\');\n      } else {\n        scope.selection.removeClass(\'img-responsive\');\n      }\n    };\n  </admin-script>\n</component>\n\n<component>\n  <name>Jumbotron</name>\n  <template>\n    <div class="jumbotron">\n      <h1>Hello, world!</h1>\n      <p>This is a simple hero unit, a simple jumbotron-style component for\n      calling extra attention to featured content or information.</p>\n      <p><a class="btn btn-primary btn-lg" role="button">Learn more</a></p>\n    </div>\n  </template>\n  <selector>div.jumbotron</selector>\n</component>\n\n<component>\n  <name>Label</name>\n  <template>\n    <span class="label label-default">New</span>\n  </template>\n  <selector>span.label</selector>\n</component>\n\n<component>\n  <name>List Group</name>\n  <template>\n    <ul class="list-group">\n      <li class="list-group-item">Cras justo odio</li>\n      <li class="list-group-item">Dapibus ac facilisis in</li>\n      <li class="list-group-item">Morbi leo risus</li>\n      <li class="list-group-item">Porta ac consectetur ac</li>\n      <li class="list-group-item">Vestibulum at eros</li>\n    </ul>\n  </template>\n  <selector>ul.list-group</selector>\n</component>\n\n<component>\n  <name>List</name>\n  <template>\n    <ul>\n      <li>List item 1.</li>\n      <li>List item 2.</li>\n      <li>List item 3.</li>\n    </ul>\n  </template>\n  <selector>ul, ol</selector>\n  <admin>\n    <div class="form-group">\n      <label for="optionsListType">Type</label>\n      <select id="optionsListType" ng-model="options.type"\n        ng-options="k as v for (k,v) in options.types"\n        ng-change="change()">\n      </select>\n    </div>\n    <div class="form-group">\n      <label for="optionsListStyle">Style</label>\n      <select id="optionsListStyle" ng-model="options.style"\n        ng-options="k for k in [\'unstyled\', \'inline\']"\n        ng-change="change()">\n        <option value="">normal</option>\n      </select>\n    </div>\n  </admin>\n  <admin-script>\n    scope.options.types = {UL: \'unordered\', OL: \'ordered\'};\n    scope.options.type = scope.selection.prop(\'nodeName\');\n\n    if (scope.selection.hasClass(\'list-unstyled\')) {\n      scope.options.style = \'unstyled\';\n    } else if (scope.selection.hasClass(\'list-inline\')) {\n      scope.options.style = \'inline\';\n    }\n\n    scope.update = function () {\n      var newElement = document.createElement(scope.options.type);\n      newElement = angular.element(newElement);\n      newElement.append(scope.selection.contents());\n\n      if (scope.options.style === \'unstyled\') {\n        newElement.removeClass(\'list-inline\').addClass(\'list-unstyled\');\n      } else if (scope.options.style === \'inline\') {\n        newElement.removeClass(\'list-unstyled\').addClass(\'list-inline\');\n      } else {\n        newElement.removeClass(\'list-unstyled\').removeClass(\'list-inline\');\n      }\n\n      scope.selection.replaceWith(newElement);\n      scope.select(newElement);\n    };\n  </admin-script>\n</component>\n\n<component>\n  <name>Navbar</name>\n  <template>\n    <nav class="navbar navbar-default" role="navigation">\n      <div class="navbar-header">\n        <a class="navbar-brand" href="#">Brand</a>\n      </div>\n\n      <ul class="nav navbar-nav">\n        <li class="active"><a href="#">Link</a></li>\n        <li><a href="#">Link</a></li>\n      </ul>\n    </nav>\n  </template>\n  <selector>nav.navbar</selector>\n</component>\n\n<component>\n  <name>Page Header</name>\n  <template>\n    <div class="page-header">\n      <h1>Example page header <small>Subtext for header</small></h1>\n    </div>\n  </template>\n  <selector>div.page-header</selector>\n</component>\n\n<component>\n  <name>Pagination</name>\n  <template>\n    <ul class="pagination">\n      <li><a href="#">&laquo;</a></li>\n      <li><a href="#">1</a></li>\n      <li><a href="#">2</a></li>\n      <li><a href="#">3</a></li>\n      <li><a href="#">4</a></li>\n      <li><a href="#">5</a></li>\n      <li><a href="#">&raquo;</a></li>\n    </ul>\n  </template>\n  <selector>ul.pagination</selector>\n</component>\n\n<component>\n  <name>Panel</name>\n  <template>\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <h3 class="panel-title">Panel title</h3>\n      </div>\n      <div class="panel-body">\n        Panel content\n      </div>\n      <div class="panel-footer">Panel footer</div>\n    </div>\n  </template>\n  <selector>div.panel</selector>\n</component>\n\n<component>\n  <name>Paragraph</name>\n  <template>\n    <p>This is a paragraph.</p>\n  </template>\n  <selector>p</selector>\n</component>\n\n<component>\n  <name>Pills</name>\n  <template>\n    <ul class="nav nav-pills">\n      <li class="active"><a href="#">Home</a></li>\n      <li><a href="#">Profile</a></li>\n      <li><a href="#">Messages</a></li>\n    </ul>\n  </template>\n  <selector>ul.nav.nav-pills</selector>\n</component>\n\n<component>\n  <name>Radio</name>\n  <template>\n    <div class="form-group">\n      <div class="radio">\n        <label>\n          <input type="radio" name="optionsRadios" value="1" checked>\n          <span>Radio Option 1</span>\n        </label>\n      </div>\n      <div class="radio">\n        <label>\n          <input type="radio" name="optionsRadios" value="2">\n          <span>Radio Option 2</span>\n        </label>\n      </div>\n    </div>\n  </template>\n  <selector>input[type="radio"]</selector>\n</component>\n\n<component>\n  <name>Select</name>\n  <template>\n    <div class="form-group">\n      <label>Select</label>\n      <select class="form-control">\n        <option>1</option>\n        <option>2</option>\n        <option>3</option>\n        <option>4</option>\n        <option>5</option>\n      </select>\n    </div>\n  </template>\n  <selector>select</selector>\n</component>\n\n<component>\n  <name>Table</name>\n  <template>\n    <table class="table">\n      <thead>\n        <tr>\n          <th>#</th>\n          <th>First Name</th>\n          <th>Last Name</th>\n          <th>Username</th>\n        </tr>\n      </thead>\n      <tbody>\n      <tr>\n        <td>1</td>\n        <td>Mark</td>\n        <td>Otto</td>\n        <td>@mdo</td>\n      </tr>\n      <tr>\n        <td>2</td>\n        <td>Jacob</td>\n        <td>Thornton</td>\n        <td>@fat</td>\n      </tr>\n      <tr>\n        <td>3</td>\n        <td>Larry</td>\n        <td>the Bird</td>\n        <td>@twitter</td>\n      </tr>\n      </tbody>\n    </table>\n  </template>\n  <selector>table</selector>\n</component>\n\n<component>\n  <name>Tabs</name>\n  <template>\n    <ul class="nav nav-tabs">\n      <li class="active"><a href="#">Home</a></li>\n      <li><a href="#">Profile</a></li>\n      <li><a href="#">Messages</a></li>\n    </ul>\n  </template>\n  <selector>ul.nav.nav-tabs</selector>\n</component>\n\n<component>\n  <name>Text Input</name>\n  <template>\n    <div class="form-group">\n      <label>Text Input</label>\n      <input type="text" class="form-control">\n    </div>\n  </template>\n  <selector>input[type="text"]</selector>\n</component>\n\n<component>\n  <name>Textarea</name>\n  <template>\n    <div class="form-group">\n      <label>Textarea</label>\n      <textarea class="form-control" rows="3"></textarea>\n    </div>\n  </template>\n  <selector>textarea</selector>\n</component>\n\n<component>\n  <name>Well</name>\n  <template>\n    <div class="well">Look, I\'m in a well!</div>\n  </template>\n  <selector>div.well</selector>\n</component>\n')
}]),angular.module("bricksApp").run(["$templateCache",function(a){a.put("scripts/about/about.html",'<div id="about">\n  <div class="page-header">\n    <h1>About Bricks</h1>\n  </div>\n  <p>Bricks is a visual application development tool that makes it easy for\n  anyone to build database-driven web and mobile applications in minutes.</p>\n  <p>The applications generated with Bricks use\n  <a href="http://getbootstrap.com/">Bootstrap</a> for the interface and\n  <a href="http://angularjs.org/">AngularJS</a> for the dynamic components.\n  They can be hosted on any web server or wrapped with\n  <a href="http://phonegap.com/">PhoneGap</a> (or similar tools) for\n  deployment on mobile devices.</p>\n  <p>For more information, please go to the\n  <a href="https://github.com/sorich87/bricks">Github repository</a>.</p>\n\n  <h2>Demos</h2>\n  <p>For an example of what Bricks can do,\n  <a href="https://www.youtube.com/watch?v=dESunMRqxN0">watch the demo video</a> or\n  <a href="http://sorich87.github.io/bricks-samples/contacts/">play with the demo app</a>.</p>\n\n  <h2>License</h2>\n  <p>Bricks is licensed under the\n  <a href="https://www.gnu.org/licenses/agpl-3.0.html">GNU Affero General\n    Public License</a>.</p>\n</div>\n'),a.put("scripts/apps/apps.html",'<div id="apps">\n  <div class="btn-group">\n    <button type="button" class="btn btn-default dropdown-toggle"\n      ng-click="toggleAppsMenu()">\n      {{currentApp.name}} <span class="caret"></span>\n    </button>\n    <ul class="dropdown-menu" role="menu" ng-show="showAppsMenu">\n      <li ng-repeat="app in apps"\n      ng-class="{disabled: app.id === currentApp.id}">\n      <a href="" ng-click="selectApp(app)">\n        {{app.name}}\n      </a>\n      </li>\n      <li class="divider"></li>\n      <li>\n      <a href="" ng-click="toggleAppsModal()">\n        <span class="glyphicon glyphicon-plus"></span>\n        New App\n      </a>\n      </li>\n    </ul>\n  </div>\n  <button class="btn btn-primary navbar-btn" ng-click="download()">\n    Download\n  </button>\n\n  <modal title="\'New App\'" submit="addApp()" close="hideAppsModal()"\n    open="showAppsModal">\n    <form class="form-horizontal" role="form" name="newAppForm"\n      ng-submit="addApp()">\n      <div class="form-group">\n        <label for="input-new-app-name" class="col-lg-2 control-label">\n          Name\n        </label>\n        <div class="col-lg-10">\n          <input type="text" class="form-control" id="input-new-app-name"\n          ng-model="app.name" required name="name" validation-class>\n        </div>\n      </div>\n    </form>\n  </modal>\n</div>\n'),a.put("scripts/common/common/modal.html",'<div class="modal" id="new-app" ng-show="open()">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" ng-click="close()"\n          ng-if="closeable">\n          &times;\n        </button>\n        <h4 class="modal-title" id="new-app-header">{{title}}</h4>\n      </div>\n      <div class="modal-body" ng-transclude></div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default" ng-click="close()"\n          ng-if="closeable">\n          Close\n        </button>\n        <button type="button" class="btn btn-primary" ng-click="submit()">\n          Save\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n'),a.put("scripts/common/common/navbar.html",'<div ng-show="show">\n  <div class="navbar navbar-fixed-top navbar-default">\n    <div class="navbar-brand">BRICKS</div>\n    <ul class="nav navbar-nav">\n      <li activelink="active"><a href="#">Editor</a></li>\n      <li activelink="active"><a href="#/database">Database</a></li>\n      <li activelink="active"><a href="#/settings">Settings</a></li>\n      <li activelink="active"><a href="#/about">About</a></li>\n    </ul>\n    <apps></apps>\n  </div>\n</div>\n'),a.put("scripts/database/database.html",'<div id="database">\n  <div class="tables" ng-if="hasTables()">\n    <ul class="nav nav-tabs">\n      <li ng-repeat="table in app.tables"\n        ng-class="{active: table.name === currentTable.name}">\n        <a href="" ng-click="selectTable($index)">{{table.name}}</a>\n      </li>\n    </ul>\n    <button class="btn btn-link navbar-btn" ng-click="showModal.newTable = true">\n      <span class="glyphicon glyphicon-plus"></span>\n      New Table\n    </button>\n  </div>\n\n  <div class="actions" ng-if="hasTables()">\n    <button class="btn btn-default" ng-click="showModal.newRow = true">\n      <span class="glyphicon glyphicon-plus"></span>\n      Add Row\n    </button>\n    <button class="btn btn-default" ng-click="showModal.newColumn = true">\n      <span class="glyphicon glyphicon-plus"></span>\n      Add Column\n    </button>\n    <div class="btn-group">\n      <button type="button" class="btn btn-default dropdown-toggle"\n        ng-click="showMenu.actions = !showMenu.actions">\n        More <span class="caret"></span>\n      </button>\n      <ul class="dropdown-menu" role="menu" ng-show="showMenu.actions">\n        <li><a href="" ng-click="showModal.deleteColumn = true">\n          Delete Column\n        </a></li>\n        <li><a href="" ng-click="emptyTable()">Empty Table</a></li>\n        <li><a href="" ng-click="deleteTable()">Delete Table</a></li>\n      </ul>\n    </div>\n  </div>\n\n  <div class="rows" ng-grid="gridOptions"></div>\n\n  <modal title="\'New Table\'" submit="addTable()"\n    close="showModal.newTable = false" closeable="hasTables()"\n    open="!hasTables() || showModal.newTable">\n    <form class="form-horizontal" action="" name="newTableForm"\n      ng-submit="addTable(newTable)">\n      <div class="form-group">\n        <label class="col-sm-4 control-label" for="newTableName">\n          Table Name\n        </label>\n        <div class="col-sm-8">\n          <input type="text" class="form-control" id="newTableName" required\n          ng-model="newTable.name" name="name" validation-class\n          ng-pattern="/^[a-zA-Z_][a-zA-Z0-9_]*$/">\n          <span class="help-block">Must begin with a letter or underscore and\n            only contain letters, underscores or digits.</span>\n        </div>\n      </div>\n    </form>\n  </modal>\n\n  <modal title="\'New Column\'" submit="addColumn()"\n    close="showModal.newColumn = false" open="showModal.newColumn">\n    <form class="form-horizontal" action="" name="newColumnForm"\n      ng-submit="addColumn()">\n      <div class="form-group">\n        <label class="col-sm-4 control-label" for="newColumnName">\n          Name\n        </label>\n        <div class="col-sm-6">\n          <input type="text" class="form-control" id="newColumnName" required\n          ng-model="newColumn.name" ng-pattern="/^[a-zA-Z_][a-zA-Z0-9_]*$/"\n          name="name" validation-class>\n          <span class="help-block">Must begin with a letter or underscore and\n            only contain letters, underscores or digits.</span>\n        </div>\n      </div>\n    </form>\n  </modal>\n\n  <modal title="\'Delete Column\'" submit="deleteColumn()"\n    close="showModal.deleteColumn = false" open="showModal.deleteColumn">\n    <form class="form-horizontal" action="" name="deleteColumnForm"\n      ng-submit="deleteColumn()">\n      <div class="form-group">\n        <label class="col-sm-4 control-label" for="deleteColumnName">\n          Name\n        </label>\n        <div class="col-sm-6">\n          <select class="form-control" id="deleteColumnName" validation-class\n            ng-model="$parent.columnToDelete" name="name" required\n            ng-options="i as column.name for (i, column) in currentTable.columns">\n          </select>\n        </div>\n      </div>\n    </form>\n  </modal>\n\n  <modal title="\'New Row\'" submit="addRow()"\n    close="showModal.newRow = false" open="showModal.newRow">\n    <form class="form-horizontal" action="" ng-submit="addRow()">\n      <div class="form-group" ng-repeat="column in currentTable.columns">\n        <label class="col-sm-4 control-label" for="newRow_{{column.name}}">\n          {{column.name}}\n        </label>\n        <div class="col-sm-6">\n          <input type="text" class="form-control" id="newRow_{{column.name}}"\n          ng-model="newRow[column.name]" ng-disabled="isDefaultColumn(column)">\n        </div>\n      </div>\n    </form>\n  </modal>\n</div>\n'),a.put("scripts/settings/settings.html",'<div id="settings">\n  <div class="page-header">\n    <h1>Settings</h1>\n  </div>\n\n  <div class="alert alert-{{alert.type}}" ng-repeat="alert in alerts">\n    {{alert.message}}\n  </div>\n\n  <form class="form-horizontal" action="" name="settingsForm"\n    ng-submit="saveSettings()">\n    <div class="form-group">\n      <label class="col-sm-4 control-label" for="settingsAppName">\n        App Name\n      </label>\n      <div class="col-sm-6">\n        <input type="text" class="form-control" id="settingsAppName"\n        ng-model="app.name" name="name" validation-class required>\n      </div>\n    </div>\n\n    <div class="form-group">\n      <label class="col-sm-4 control-label">Data Storage</label>\n      <div class="col-sm-6">\n        <select class="form-control" id="settingsStorage"\n          ng-options="storage.name as storage.label for storage in storages"\n          ng-model="app.storage" name="storage"\n          validation-class required>\n        </select>\n      </div>\n    </div>\n\n    <div class="form-group" ng-if="app.storage === \'firebase\'">\n      <label class="col-sm-4 control-label" for="settingsFirebase">\n        Firebase Name\n      </label>\n      <div class="col-sm-6">\n        <input type="text" class="form-control" id="settingsFirebase"\n          ng-model="app.settings.firebase" name="firebase"\n          validation-class required>\n      </div>\n    </div>\n\n    <div class="form-group">\n      <div class="col-lg-offset-4 col-lg-8">\n        <button type="submit" class="btn btn-primary">Save Settings</button>\n      </div>\n    </div>\n  </form>\n\n  <hr />\n  <h4>Delete this app</h4>\n  <p>Please make sure you want to delete\n  this app before clicking the button below.</p>\n  <button class="btn btn-danger" ng-click="deleteApp(app)">\n    Delete the app\n  </button>\n</div>\n'),a.put("scripts/start/start.html",'<div id="start">\n  <div class="page-header">\n    <h1>Getting Started</h1>\n  </div>\n  <p>Welcome to Bricks, the visual application development tool that makes it easy for\n  anyone to build database-driven web and mobile applications in minutes.</p>\n  <p>For an example of what Bricks can do,\n  <a href="https://www.youtube.com/watch?v=dESunMRqxN0">watch the demo video</a> or\n  <a href="http://sorich87.github.io/bricks-samples/contacts/">play with the demo app</a>.</p>\n  <p>Get started by creating your first app:</p>\n\n  <form class="form-horizontal" name="newAppForm" ng-submit="addApp()">\n    <div class="form-group">\n      <label for="input-new-app-name" class="col-lg-2 control-label">\n        Name\n      </label>\n      <div class="col-lg-4">\n        <input type="text" class="form-control" id="input-new-app-name"\n        ng-model="app.name" required name="name" validation-class>\n      </div>\n    </div>\n    <div class="form-group">\n      <div class="col-lg-offset-2 col-lg-4">\n        <button type="submit" class="btn btn-primary">Create App</button>\n      </div>\n    </div>\n  </form>\n</div>\n'),a.put("scripts/ui/ui.html",'<div id="editor" ui>\n  <div id="structure" class="sidebar components">\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <h4 class="panel-title">Components</h4>\n      </div>\n      <div class="panel-body">\n        <div class="component" ng-repeat="component in components"\n          draggable="true" html="component.template">{{component.name}}</div>\n      </div>\n    </div>\n\n    <sidebar-toggle position="right"></sidebar-toggle>\n  </div>\n\n  <div id="details" class="sidebar">\n    <div class="panel-group">\n      <component-style></component-style>\n      <bindings></bindings>\n      <events></events>\n    </div>\n\n    <sidebar-toggle position="left"></sidebar-toggle>\n  </div>\n\n  <div id="toolbar">\n    <pages></pages>\n    <div class="actions">\n      <devices></devices>\n      <inspector-toggle></inspector-toggle>\n    </div>\n  </div>\n\n\n  <div id="canvas">\n    <iframe edit-frame droppable src="edit.html" seamless></iframe>\n\n    <div class="overlay">\n      <overlay-highlight></overlay-highlight>\n      <overlay-select></overlay-select>\n    </div>\n\n    <inspector></inspector>\n  </div>\n</div>\n'),a.put("scripts/ui/ui/components/bindings.html",'<div class="panel panel-default" ng-init="open = true">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a class="accordion-toggle" href ng-click="open = !open">Data Binding</a>\n    </h4>\n  </div>\n  <div class="panel-collapse" ng-show="open">\n    <div class="panel-body">\n      <form ng-if="tables && tables.length > 0">\n        <fieldset ng-disabled="!selection">\n          <div class="form-group" ng-show="!isInput">\n            <label class="control-label" for="bindingsBind">Content</label>\n            <input class="form-control" id="bindingsContent"\n              ng-model="bindings.bind">\n          </div>\n\n          <div class="form-group" ng-show="isInput">\n            <label class="control-label" for="bindingsModel">Content</label>\n            <input class="form-control" id="bindingsModel"\n              ng-model="bindings.model">\n          </div>\n\n          <div class="form-group">\n            <label class="control-label" for="bindingsRepeat">\n              Repeat for each\n            </label>\n            <select class="form-control" id="bindingsRepeat"\n              ng-options="table.name as table.name for table in tables"\n              ng-model="bindings.repeat">\n              <option value=""></option>\n            </select>\n          </div>\n\n          <div class="form-group" ng-show="bindings.repeat">\n            <label class="control-label">Filters</label>\n            <p ng-repeat="filter in bindings.filters">\n              <input ng-model="filter.name" placeholder="column"\n                style="width: 48%">\n              <input ng-model="filter.value" placeholder="value"\n                style="width: 48%">\n            </p>\n            <p>\n              <button class="btn btn-default btn-sm"\n                ng-click="bindings.filters.push({})">Add filter</button>\n            </p>\n          </div>\n\n          <div class="form-group">\n            <label class="control-label" for="bindingsClass">CSS Classes</label>\n            <p ng-repeat="class in bindings.classes">\n              <input ng-model="class.name" placeholder="class"\n                style="width: 48%">\n              <input ng-model="class.value" placeholder="condition"\n                style="width: 48%">\n            </p>\n            <p>\n              <button class="btn btn-default btn-sm"\n                ng-click="bindings.classes.push({})">Add class</button>\n            </p>\n          </div>\n        </fieldset>\n      </form>\n      <p ng-if="!tables || tables.length === 0">There\'re no tables in the database.\n        <a href="#/database">Create tables.</a></p>\n    </div>\n  </div>\n</div>\n'),a.put("scripts/ui/ui/components/component-style.html",'<div class="panel panel-default" ng-init="open = true">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a class="accordion-toggle" href ng-click="open = !open">Style</a>\n    </h4>\n  </div>\n  <div class="panel-collapse" ng-show="open">\n    <div class="panel-body">\n      <form role="form">\n        <p>Click any element on the page to show its style settings.</p>\n      </form>\n    </div>\n  </div>\n</div>\n\n'),a.put("scripts/ui/ui/components/events.html",'<div class="panel panel-default" ng-init="open = true">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a class="accordion-toggle" href ng-click="open = !open">Events</a>\n    </h4>\n  </div>\n  <div class="panel-collapse" ng-show="open">\n    <div class="panel-body">\n      <form>\n        <div class="form-group">\n          <label class="control-label" for="eventEvent">Event</label>\n          <select class="form-control input-sm" id="eventType"\n            ng-model="event.type" ng-disabled="!selection"\n            ng-options="name for name in names">\n            <option value=""></option>\n          </select>\n        </div>\n\n        <div class="form-group">\n          <label class="control-label" for="eventAction">Action</label>\n          <select class="form-control input-sm" id="eventAction"\n            ng-model="event.action" ng-disabled="!selection"\n            ng-options="k as v for (k,v) in actions">\n            <option value=""></option>\n          </select>\n        </div>\n\n        <div class="form-group" ng-if="event.action === \'custom\'">\n          <label class="control-label" for="eventObject">Object</label>\n          <input class="form-control" id="eventObject"\n            ng-model="event.object">\n        </div>\n\n        <div class="form-group"\n          ng-if="[\'add\' , \'update\', \'remove\'].indexOf(event.action) > -1">\n          <label class="control-label" for="eventObject">Object</label>\n          <select class="form-control input-sm" id="eventObject"\n            ng-model="event.object" ng-disabled="!selection"\n            ng-options="table.name as table.name for table in app.tables">\n            <option value=""></option>\n          </select>\n        </div>\n\n        <div class="form-group" ng-if="event.action === \'visit\'">\n          <label class="control-label" for="eventObject">Page</label>\n          <select class="form-control input-sm" id="eventObject"\n            ng-model="event.object" ng-disabled="!selection"\n            ng-options="page.url as page.url for page in app.pages">\n            <option value=""></option>\n          </select>\n        </div>\n      </form>\n    </div>\n  </div>\n</div>\n'),a.put("scripts/ui/ui/pages/inspector.html",'<div class="inspector">\n  <ul class="nav nav-tabs">\n    <li ng-class="{active: view === \'html\'}">\n      <a href="" ng-click="view = \'html\'">HTML</a>\n    </li>\n    <li ng-class="{active: view === \'css\'}">\n      <a href="" ng-click="view = \'css\'">CSS</a>\n    </li>\n    <li ng-class="{active: view === \'js\'}">\n      <a href="" ng-click="view = \'js\'">JS</a>\n    </li>\n  </ul>\n\n  <div ng-show="view === \'html\'">\n    <textarea ng-model="page().template" ui-codemirror="htmlOptions"\n      ui-refresh="view === \'html\'"></textarea>\n  </div>\n\n  <div ng-show="view === \'css\'">\n    <textarea ng-model="app.css" ui-codemirror="cssOptions"\n      ui-refresh="view === \'css\'"></textarea>\n  </div>\n\n  <div ng-show="view === \'js\'">\n    <textarea ng-model="app.js" ui-codemirror="jsOptions"\n      ui-refresh="view === \'js\'"></textarea>\n  </div>\n</div>\n'),a.put("scripts/ui/ui/pages/pages.html",'<div class="btn-group pages">\n  <button type="button" class="switch-page" ng-click="showMenu = !showMenu">\n    Page: {{current.url}} <span class="caret"></span>\n  </button>\n  <ul class="dropdown-menu" role="menu" ng-show="showMenu">\n    <li ng-repeat="page in app.pages"\n      ng-class="{disabled: page.url === current.url}">\n      <a href ng-click="setCurrent(page)">{{page.url}}</a>\n      <li class="divider"></li>\n      <li>\n        <a href="" ng-click="showModal = true">\n          <span class="glyphicon glyphicon-plus"></span>\n          New Page\n        </a>\n      </li>\n    </li>\n  </ul>\n\n  <preview></preview>\n  <button class="delete" ng-click="deletePage()"\n    ng-disabled="current.url === \'/\'">\n    Delete\n  </button>\n  <button class="save" ng-click="savePage()">\n    {{savePageText}}\n  </button>\n\n  <modal title="\'New Page\'" submit="addPage()"\n    close="showModal = false" open="showModal">\n    <form class="form-horizontal" action="" ng-submit="addPage()">\n      <div class="form-group">\n        <label class="col-sm-3 control-label" for="newPageURL">\n          URL\n        </label>\n        <div class="col-sm-7">\n          <input type="text" class="form-control" id="newPageURL" required\n            ng-model="newPage.url" ng-pattern="/^\\/[a-zA-Z0-9\\/_:]*$/"\n            name="name" validation-class>\n          <span class="help-block">\n            Examples: /products, /users, /users/:user\n          </span>\n        </div>\n      </div>\n    </form>\n  </modal>\n</div>\n'),a.put("scripts/ui/ui/screen/devices.html",'<div class="btn-group">\n  <button type="button" class="btn btn-link"\n    ng-click="showDevicesMenu = !showDevicesMenu">\n    <span class="fa fa-{{currentDevice}}"></span>\n  </button>\n  <ul class="devices" role="menu" ng-show="showDevicesMenu">\n    <li ng-repeat="device in devices">\n    <a href title="{{device}}" ng-click="$parent.currentDevice = device">\n        <span class="fa fa-{{device}}"></span>\n      </a>\n    </li>\n  </ul>\n</div>\n')}]);